"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),n=e(t),r=e(require("warning")),o=require("d3-array");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?p(e):t}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var g="react-compound-slider:";function y(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){return t.val>n.val?e?-1:1:n.val>t.val?e?1:-1:0}}function D(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.findIndex((function(e){return e.key===t}));if(-1!==o){var a=e[o],i=a.key,u=a.val;return u===n?e:[].concat(m(e.slice(0,o)),[{key:i,val:n}],m(e.slice(o+1))).sort(y(r))}return e}function b(e,t){if(!e)return[0,0];var n=e.getBoundingClientRect();return[t?n.top:n.left,t?n.bottom:n.right]}function k(e){var t=e.type,n=e.touches;return!n||n.length>1||"touchend"===(void 0===t?"":t).toLowerCase()&&n.length>0}function T(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=0,i=e.map((function(e){var t=n.getValue(e);return e!==t&&(a+=1,r(!o,"".concat(g," Invalid value encountered. Changing ").concat(e," to ").concat(t,"."))),t})).map((function(e,t){return{key:"$$-".concat(t),val:e}})).sort(y(t));return{handles:i,changes:a}}function E(e,t){return t}function S(e,t){for(var n=0;n<e.length;n++){if(e[n].key!==t[n].key)return e;if(t[n+1]&&t[n].val===t[n+1].val)return e}return t}function M(e,t,n,r,o){for(var a=-1,i=!0,u=0;u<e.length;u++){var c=e[u],s=t[u];if(!s||s.key!==c.key)return e;s.val!==c.val&&(a=u,i=s.val-c.val>0)}if(-1===a)return e;for(var l=i?n:-n,v=0;v<t.length;v++){var d=t[v],p=t[v+1];if(p&&d.val===p.val){if(v===a){var f=p.val+l;if(o(f)===f){var h=M(t,D(t,p.key,p.val+l,r),n,r,o);return h===t?e:h}return e}var m=d.val+l;if(o(m)===m){var g=M(t,D(t,d.key,d.val+l,r),n,r,o);return g===t?e:g}return e}}return t}function P(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.forEach((function(t){return t&&t(e)}))}}var O=function(e){function r(){var e,t;a(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=f(this,(e=d(r)).call.apply(e,[this].concat(o)))).getRailProps=function(e){var n=t.props,r=n.emitTouch;return l({},e,{onMouseDown:P(e&&e.onMouseDown,n.emitMouse),onTouchStart:P(e&&e.onTouchStart,r)})},t}return v(r,t.Component),u(r,[{key:"render",value:function(){var e=this.props,t=e.activeHandleID,r=(0,e.children)({getEventData:e.getEventData,activeHandleID:void 0===t?"":t,getRailProps:this.getRailProps});return r&&n.Children.only(r)}}]),r}(),I=function(e){function r(){var e,t;a(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=f(this,(e=d(r)).call.apply(e,[this].concat(o)))).autofocus=function(e){e.target instanceof HTMLElement&&e.target.focus()},t.getHandleProps=function(e,n){var r=t.props,o=r.emitKeyboard,a=r.emitMouse,i=r.emitTouch;return l({},n,{onKeyDown:P(n&&n.onKeyDown,(function(t){return o(t,e)})),onMouseDown:P(n&&n.onMouseDown,t.autofocus,(function(t){return a(t,e)})),onTouchStart:P(n&&n.onTouchStart,(function(t){return i(t,e)}))})},t}return v(r,t.Component),u(r,[{key:"render",value:function(){var e=this.props,t=e.activeHandleID,r=e.handles,o=(0,e.children)({handles:void 0===r?[]:r,activeHandleID:void 0===t?"":t,getHandleProps:this.getHandleProps});return o&&n.Children.only(o)}}]),r}(),j=function(){function e(){a(this,e),this.interpolator=void 0,this.domain=[0,1],this.range=[0,1],this.domain=[0,1],this.range=[0,1],this.interpolator=null}return u(e,[{key:"createInterpolator",value:function(e,t){var n=this,r=e[0],o=e[1],a=t[0],i=t[1];return o<r?function(e){return n.interpolateValue(i,a)(n.deinterpolateValue(o,r)(e))}:function(e){return n.interpolateValue(a,i)(n.deinterpolateValue(r,o)(e))}}},{key:"interpolateValue",value:function(e,t){return t-=e=+e,function(n){return e+t*n}}},{key:"deinterpolateValue",value:function(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(){return t}}},{key:"rescale",value:function(){return this.interpolator=null,this}},{key:"getValue",value:function(e){return(this.interpolator||(this.interpolator=this.createInterpolator(this.domain,this.range)))(+e)}},{key:"setDomain",value:function(e){return this.domain=[e[0],e[1]],this.rescale(),this}},{key:"getDomain",value:function(){return this.domain}},{key:"setRange",value:function(e){return this.range=[e[0],e[1]],this}},{key:"getTicks",value:function(e){var t=this.domain;return o.ticks(t[0],t[t.length-1],e||10)}}]),e}(),H=function(){return{value:0,percent:0}},x=n.memo((function(e){var t=e.children,n=e.values,r=e.scale,o=void 0===r?new j:r,a=e.count,i=e.getEventData,u=e.activeHandleID;return t({getEventData:void 0===i?H:i,activeHandleID:void 0===u?"":u,ticks:(n||o.getTicks(void 0===a?10:a)).map((function(e){return{id:"$$-".concat(e),value:e,percent:o.getValue(e)}}))})})),A=function(){return{value:0,percent:0}},C=function(e){function r(){var e,t;a(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=f(this,(e=d(r)).call.apply(e,[this].concat(o)))).getTrackProps=function(e){var n=t.props,r=n.emitTouch;return l({},e||{},{onMouseDown:P(e&&e.onMouseDown,n.emitMouse),onTouchStart:P(e&&e.onTouchStart,r)})},t}return v(r,t.Component),u(r,[{key:"render",value:function(){for(var e=this.getTrackProps,t=this.props,r=t.children,o=t.left,a=void 0===o||o,i=t.right,u=void 0===i||i,c=t.scale,s=void 0===c?new j:c,l=t.handles,v=void 0===l?[]:l,d=t.getEventData,p=void 0===d?A:d,f=t.activeHandleID,h=void 0===f?"":f,m=s.getDomain(),g=[],y=0;y<v.length+1;y++){var D=v[y-1],b=v[y];0===y&&!0===a?D={id:"$",value:m[0],percent:0}:y===v.length&&!0===u&&(b={id:"$",value:m[1],percent:100}),D&&b&&g.push({id:"".concat(D.id,"-").concat(b.id),source:D,target:b})}var k=r({getEventData:p,activeHandleID:h,tracks:g,getTrackProps:e});return k&&n.Children.only(k)}}]),r}();function V(e,t,n){return Math.min(Math.max(e,t),n)}var L=function e(){var t=this;a(this,e),this.step=1,this.domain=[0,1],this.range=[0,1],this.setDomain=function(e){return t.domain=[e[0],e[1]],t},this.setRange=function(e){return t.range=[e[0],e[1]],t},this.setStep=function(e){return t.step=e,t},this.getValue=function(e){var n=h(t.domain,2),r=n[0],o=n[1],a=h(t.range,2),i=a[0],u=a[1],c=t.step,s=(V(e,r,o)-r)/(o-r);return V(c*Math.round(s*(u-i)/c)+i,i<u?i:u,u>i?u:i)}},R="undefined"!=typeof window&&"undefined"!=typeof document,U=function(){},_=function(e,t,n,r){var o=r?e-t:e+t;return r?Math.max(n[0],o):Math.min(n[1],o)},K=function(e,t,n,r){var o=r?e+t:e-t;return r?Math.min(n[1],o):Math.max(n[0],o)},$=function(e){function o(){var e,t;a(this,o);for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return(t=f(this,(e=d(o)).call.apply(e,[this].concat(i)))).state={step:.1,values:[],domain:[0,100],handles:[],reversed:!1,activeHandleID:"",valueToPerc:null,valueToStep:null,pixelToStep:null,document:document},t.slider=n.createRef(),t.onKeyDown=function(e,n){var r=["ArrowRight","ArrowUp"],o=["ArrowDown","ArrowLeft"],a=p(t),i=a.state.handles,u=a.props,c=u.step,s=void 0===c?.1:c,l=u.reversed,v=void 0!==l&&l,d=u.vertical,f=void 0!==d&&d,h=u.domain,m=void 0===h?[0,100]:h,g=e.key||"".concat(e.keyCode);if(r.concat(o).includes(g)){if(f){var y=[o,r];r=y[0],o=y[1]}e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();var D=i.find((function(e){return e.key===n}));if(D){var b=D.val,k=b;r.includes(g)?k=_(b,s,m,v):o.includes(g)&&(k=K(b,s,m,v));var T=i.map((function(e){return e.key===n?{key:e.key,val:k}:e}));t.submitUpdate(T,!0)}}},t.onMouseDown=function(e,n){t.onStart(e,n,!1)},t.onTouchStart=function(e,n){k(e)||t.onStart(e,n,!0)},t.getEventData=function(e,n){var r,o=p(t),a=o.state,i=a.pixelToStep,u=a.valueToPerc,c=o.props.vertical;return i.setDomain(b(t.slider.current,c)),n&&e instanceof TouchEvent?r=i.getValue(T(c,e)):e instanceof MouseEvent&&(r=i.getValue(c?e.clientY:e.pageX)),{value:r,percent:u.getValue(r)}},t.onMouseMove=function(e){var n=p(t),r=n.state,o=r.handles,a=r.pixelToStep,i=r.activeHandleID,u=void 0===i?"":i,c=n.props,s=c.vertical,l=c.reversed,v=void 0!==l&&l;a.setDomain(b(t.slider.current,s));var d=D(o,u,a.getValue(s?e.clientY:e.pageX),v);t.submitUpdate(d)},t.onTouchMove=function(e){var n=p(t),r=n.state,o=r.handles,a=r.pixelToStep,i=r.activeHandleID,u=n.props,c=u.vertical,s=u.reversed;if(null!==a&&!k(e)){a.setDomain(b(t.slider.current,c));var l=D(o,i,a.getValue(T(c,e)),s);t.submitUpdate(l)}},t.onMouseUp=function(){var e=p(t),n=e.state,r=n.handles,o=void 0===r?[]:r,a=n.activeHandleID,i=e.props,u=i.onChange,c=i.onSlideEnd,s=void 0===c?U:c;if((void 0===u?U:u)(o.map((function(e){return e.val}))),s(o.map((function(e){return e.val})),{activeHandleID:a}),t.setState({activeHandleID:""}),R){var l=t.props.document||document;l.removeEventListener("mousemove",t.onMouseMove),l.removeEventListener("mouseup",t.onMouseUp)}},t.onTouchEnd=function(){var e=p(t),n=e.state,r=n.handles,o=n.activeHandleID,a=e.props,i=a.onChange,u=a.onSlideEnd,c=void 0===u?U:u;if((void 0===i?U:i)(r.map((function(e){return e.val}))),c(r.map((function(e){return e.val})),{activeHandleID:o}),t.setState({activeHandleID:""}),R){var s=t.props.document||document;s.removeEventListener("touchmove",t.onTouchMove),s.removeEventListener("touchend",t.onTouchEnd)}},t}return v(o,t.PureComponent),u(o,[{key:"componentDidMount",value:function(){this.state.pixelToStep.setDomain(b(this.slider.current,this.props.vertical))}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"removeListeners",value:function(){var e=this.props.document||document;R&&(e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mouseup",this.onMouseUp),e.removeEventListener("touchmove",this.onTouchMove),e.removeEventListener("touchend",this.onTouchEnd))}},{key:"onStart",value:function(e,t,n){var r=this.state.handles,o=this.props.onSlideStart,a=void 0===o?U:o;n||e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),r.find((function(e){return e.key===t}))?(this.setState({activeHandleID:t}),a(r.map((function(e){return e.val})),{activeHandleID:t}),n?this.addTouchEvents():this.addMouseEvents()):(this.setState({activeHandleID:""}),this.handleRailAndTrackClicks(e,n))}},{key:"handleRailAndTrackClicks",value:function(e,t){var n,r=this,o=this.state,a=o.handles,i=o.pixelToStep,u=this.props,c=u.vertical,s=u.reversed,l=void 0!==s&&s;i.setDomain(b(this.slider.current,c)),n=i.getValue(t?T(c,e):c?e.clientY:e.pageX);for(var v="",d=Infinity,p=0;p<a.length;p++){var f=a[p],h=f.key,m=Math.abs(f.val-n);m<d&&(v=h,d=m)}var g=D(a,v,n,l);this.setState({activeHandleID:v},(function(){r.submitUpdate(g,!0),t?r.addTouchEvents():r.addMouseEvents()}))}},{key:"addMouseEvents",value:function(){if(R){var e=this.props.document||document;e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("mouseup",this.onMouseUp)}}},{key:"addTouchEvents",value:function(){if(R){var e=this.props.document||document;e.addEventListener("touchmove",this.onTouchMove),e.addEventListener("touchend",this.onTouchEnd)}}},{key:"submitUpdate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.props,o=n.mode,a=void 0===o?1:o,i=n.step,u=void 0===i?.1:i,c=n.onUpdate,s=void 0===c?U:c,l=n.onChange,v=void 0===l?U:l,d=n.reversed,p=void 0!==d&&d,f=this.state.valueToStep.getValue;this.setState((function(n){var o=n.handles,i=[];if("function"==typeof a)i=a(o,e,u,p,f),r(Array.isArray(i),"Custom mode function did not return an array.");else switch(a){case 1:i=E(0,e);break;case 2:i=S(o,e);break;case 3:i=M(o,e,u,p,f);break;default:i=e,r(!1,"".concat(g," Invalid mode value."))}return s(i.map((function(e){return e.val}))),t&&v(i.map((function(e){return e.val}))),{handles:i}}))}},{key:"render",value:function(){var e=this,t=this.state,r=t.valueToPerc,o=t.activeHandleID,a=this.props,i=a.className,u=a.rootStyle,c=void 0===u?{}:u,s=a.rootProps,v=void 0===s?{}:s,d=a.component,p=void 0===d?"div":d,f=a.disabled,h=void 0!==f&&f,m=a.flatten,g=void 0!==m&&m,y=t.handles.map((function(e){var t=e.val;return{id:e.key,value:t,percent:r.getValue(t)}})),D=n.Children.map(this.props.children,(function(t){return(i=(a=t.type)?a.name:"")===I.name||i===O.name||i===x.name||i===C.name?n.cloneElement(t,{scale:r,handles:y,activeHandleID:o,getEventData:e.getEventData,emitKeyboard:h?U:e.onKeyDown,emitMouse:h?U:e.onMouseDown,emitTouch:h?U:e.onTouchStart}):t;var a,i}));return g?n.createElement(n.Fragment,null,n.createElement(p,l({},v,{style:c,className:i,ref:this.slider})),D):n.createElement(n.Fragment,null,n.createElement(p,l({},v,{style:c,className:i,ref:this.slider}),D))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,o,a=e.step,i=void 0===a?.1:a,u=e.values,c=e.domain,s=void 0===c?[0,100]:c,l=e.reversed,v=void 0!==l&&l,d=e.onUpdate,p=void 0===d?U:d,f=e.onChange,m=void 0===f?U:f,y=e.warnOnChanges,D=void 0!==y&&y,b=t.valueToPerc,k=t.valueToStep,T=t.pixelToStep,E={};if(b&&k&&T||(b=new j,k=new L,T=new L,E.valueToPerc=b,E.valueToStep=k,E.pixelToStep=T),null===t.step||null===t.domain||null===t.reversed||i!==t.step||s[0]!==t.domain[0]||s[1]!==t.domain[1]||v!==t.reversed){var S=h(s,2),M=S[0],P=S[1];k.setStep(i).setRange([M,P]).setDomain([M,P]),!0===v?(b.setDomain([M,P]).setRange([100,0]),T.setStep(i).setRange([P,M])):(b.setDomain([M,P]).setRange([0,100]),T.setStep(i).setRange([M,P])),r(P>M,"".concat(g," Max must be greater than min (even if reversed). Max is ").concat(P,". Min is ").concat(M,"."));var O=w(u||t.values,v,k,D),I=O.handles;(O.changes||void 0===u||u===t.values)&&(p(I.map((function(e){return e.val}))),m(I.map((function(e){return e.val})))),E.step=i,E.values=u,E.domain=s,E.handles=I,E.reversed=v}else if(!((n=u)===(o=t.values)||n.length===o.length&&n.reduce(function(e){return function(t,n,r){return t&&e[r]===n}}(o),!0))){var H=w(u,v,k,D),x=H.handles;H.changes&&(p(x.map((function(e){return e.val}))),m(x.map((function(e){return e.val})))),E.values=u,E.handles=x}return Object.keys(E).length?E:null}}]),o}();exports.Handles=I,exports.Rail=O,exports.Slider=$,exports.Ticks=x,exports.Tracks=C,exports.mode1=E,exports.mode2=S,exports.mode3=M;
//# sourceMappingURL=rcs.cjs.production.min.js.map
